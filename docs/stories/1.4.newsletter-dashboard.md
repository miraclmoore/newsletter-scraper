# Story 1.4: Newsletter Dashboard/Feed View

## Status
Draft

## Story
**As a** user,
**I want** to see all my newsletters in a clean web dashboard with search and filtering,
**so that** I can efficiently browse and consume content from all my sources in one place.

## Acceptance Criteria
1. Dashboard displays newsletter items in a clean, chronological feed
2. User can search newsletter content by keywords
3. User can filter newsletters by source (Gmail, Outlook, RSS, Forwarding)
4. Each newsletter item shows title, source, date, and preview content
5. User can click to expand/collapse full newsletter content
6. Dashboard supports infinite scroll or pagination for performance
7. User can mark items as read/unread
8. Dashboard is responsive and works on mobile devices
9. Loading states and empty states are handled gracefully

## Tasks / Subtasks
- [ ] Create main dashboard layout (AC: 1, 9)
  - [ ] Build dashboard page component structure
  - [ ] Implement newsletter item card component
  - [ ] Add loading spinners and skeleton states
  - [ ] Create empty state for no newsletters
- [ ] Implement feed display logic (AC: 1, 4, 5)
  - [ ] Fetch newsletter items from API
  - [ ] Display items in chronological order
  - [ ] Show title, source, date, preview
  - [ ] Add expand/collapse functionality for full content
- [ ] Build search functionality (AC: 2)
  - [ ] Add search input component
  - [ ] Implement client-side search filtering
  - [ ] Highlight search terms in results
  - [ ] Add search performance optimizations
- [ ] Create filtering system (AC: 3)
  - [ ] Build source filter dropdown/tabs
  - [ ] Implement filter state management
  - [ ] Add "All Sources" and individual source options
  - [ ] Show active filter indicators
- [ ] Add pagination/infinite scroll (AC: 6)
  - [ ] Implement pagination backend endpoint
  - [ ] Choose between pagination and infinite scroll UX
  - [ ] Add "Load More" or automatic loading
  - [ ] Handle pagination state management
- [ ] Implement read/unread functionality (AC: 7)
  - [ ] Add read status to database model
  - [ ] Create mark as read/unread API endpoints
  - [ ] Add read/unread visual indicators
  - [ ] Implement bulk mark operations
- [ ] Ensure responsive design (AC: 8)
  - [ ] Test dashboard on mobile devices
  - [ ] Adjust layouts for smaller screens
  - [ ] Optimize touch interactions
  - [ ] Ensure readable text and appropriate sizing

## Dev Notes

### Previous Story Insights
From Story 1.1-1.3:
- Database models for Users, Sources, Items are established
- API patterns with RESTful endpoints (`GET /feed`, `POST /sources`)
- Content parsing and normalization systems are in place
- Deduplication ensures clean data for display

### Data Models
From architecture documents:
- **Items**: Newsletter content with title, content, source relationship [Source: architecture/data-model-simplified.md]
- **Sources**: Different source types (OAuth, RSS, Forwarding) [Source: architecture/data-model-simplified.md]  
- **Users**: User preferences and read status tracking [Source: architecture/data-model-simplified.md]
- Indexes on user_id, tsvector for search optimization [Source: architecture/data-model-simplified.md]

### API Specifications
From architecture documents:
- `GET /feed` - Main endpoint for dashboard content [Source: architecture/api-examples.md]
- Search and filtering will extend feed endpoint with query parameters
- Read status endpoints extend CRUD operations [Source: architecture/core-components.md]

### Component Specifications
From architecture documents:
- **Web App (React/Tailwind)**: Dashboard interface with filters and search [Source: architecture/core-components.md]
- **API (Node/Express)**: Feed serving with search/filter support [Source: architecture/core-components.md]
- **Storage**: Postgres with search indexes for performance [Source: architecture/core-components.md]

### File Locations
Based on established patterns:
- **Dashboard components**: `/src/components/dashboard/` (Feed.jsx, NewsletterItem.jsx, SearchBar.jsx)
- **Dashboard pages**: `/src/pages/Dashboard.jsx`
- **Feed API routes**: `/src/routes/feed.js`
- **Feed service**: `/src/services/feed/` (feedService.js, searchService.js)
- **Dashboard styles**: `/src/styles/dashboard.css` (if custom styles needed beyond Tailwind)
- **Dashboard hooks**: `/src/hooks/useFeed.js`, `/src/hooks/useSearch.js`

### Technical Constraints
From architecture documents:
- **Performance**: Efficient search with Postgres indexes [Source: architecture/data-model-simplified.md]
- **Scalability**: Handle large volumes of newsletter items [Source: architecture/performance-scaling.md]
- **Search**: tsvector indexes for full-text search [Source: architecture/data-model-simplified.md]
- **UI Framework**: React/Tailwind for consistent styling [Source: architecture/core-components.md]

### Testing Strategy
**Testing Framework Requirements:**
- **Frontend Testing**: Jest + React Testing Library for components
- **Integration Testing**: Test API integration with feed endpoints
- **Performance Testing**: Test with large datasets
- **Responsive Testing**: Test across device sizes

**Required Test Coverage:**
- **Component Tests**: Dashboard layout, newsletter items, search, filters
- **Integration Tests**: Feed loading, search functionality, pagination
- **Performance Tests**: Large dataset rendering, search performance
- **Accessibility Tests**: Keyboard navigation, screen reader support

**Specific Test Scenarios:**
- Dashboard loads and displays newsletters correctly
- Search filters newsletters by content and title
- Source filtering works for all source types
- Pagination/infinite scroll loads more content
- Read/unread status updates correctly
- Responsive layout adapts to mobile screens
- Empty states display when no newsletters exist
- Loading states appear during data fetching
- Error handling for failed API calls

**Test File Locations:**
- **Component tests**: `/src/components/dashboard/__tests__/`
- **Page tests**: `/src/pages/__tests__/Dashboard.test.jsx`
- **Hook tests**: `/src/hooks/__tests__/useFeed.test.js`
- **Integration tests**: `/tests/integration/dashboard.test.js`
- **E2E tests**: `/tests/e2e/newsletter-browsing.test.js`

## Change Log
| Date | Version | Description | Author |
|------|---------|-------------|---------|
| 2025-09-09 | 1.0 | Initial story creation with comprehensive testing guidance | Sarah (PO) |

## Dev Agent Record
*This section will be populated by the development agent during implementation*

## QA Results
*Results from QA Agent review will be populated here*